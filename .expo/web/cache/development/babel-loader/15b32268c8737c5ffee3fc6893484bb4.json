{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/Bhavesh/Developer/AI_CAMP/ai-on-thumbs/screens/Try.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Background from \"../components/Background\";\nimport Logo from \"../components/Logo\";\nimport Header from \"../components/Header\";\nimport FootPrint from \"../components/FootPrint\";\nimport ActionButton from \"../components/ActionButton\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { Camera } from 'expo-camera';\nimport Toast from \"../components/Toast\";\nimport * as FileSystem from 'expo-file-system';\n\nvar axios = require('axios');\n\nexport default function Try(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasPermission = _useState2[0],\n      setHasPermission = _useState2[1];\n\n  var _useState3 = useState(Camera.Constants.Type.back),\n      _useState4 = _slicedToArray(_useState3, 2),\n      type = _useState4[0],\n      setType = _useState4[1];\n\n  var _useState5 = useState({\n    value: '',\n    type: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      toast = _useState6[0],\n      setToast = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      startCamera = _useState8[0],\n      setStartCamera = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      capturedImage = _useState10[0],\n      setCapturedImage = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      imageBase64 = _useState12[0],\n      setImageBase64 = _useState12[1];\n\n  var camera = useRef(null);\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      loading = _useState14[0],\n      setLoading = _useState14[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context.sent;\n              status = _await$Camera$request.status;\n              setHasPermission(status === 'granted');\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  useEffect(function () {\n    (function _callee2() {\n      var base64;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n\n              if (!(capturedImage && capturedImage.uri)) {\n                _context2.next = 6;\n                break;\n              }\n\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(FileSystem.readAsStringAsync(capturedImage.uri, {\n                encoding: 'base64'\n              }));\n\n            case 4:\n              base64 = _context2.sent;\n              axios.post('http://python-detect-faces.herokuapp.com/image', {\n                \"base_64\": base64\n              }).then(function (response) {\n                console.log(JSON.parse(response.config.data).base_64);\n                setImageBase64(JSON.parse(response.config.data).base_64);\n                setLoading(false);\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, [capturedImage]);\n\n  if (hasPermission === null) {\n    return React.createElement(Background, {\n      style: {\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 16\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: 100,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 62\n      }\n    }));\n  }\n\n  function openCamera() {\n    setStartCamera(true);\n  }\n\n  function takePhoto() {\n    var photo;\n    return _regeneratorRuntime.async(function takePhoto$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (camera.current) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 2:\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(camera.current.takePictureAsync());\n\n          case 4:\n            photo = _context3.sent;\n            setCapturedImage(photo);\n            setStartCamera(false);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  if (startCamera) {\n    return React.createElement(Camera, {\n      style: {\n        flex: 1,\n        width: \"100%\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\"\n      },\n      ref: function ref(r) {\n        camera.current = r;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 16\n      }\n    }, React.createElement(ActionButton, {\n      style: {\n        marginBottom: 30\n      },\n      onPress: takePhoto,\n      title: \"Take Photo\",\n      icon: React.createElement(AntDesign, {\n        name: \"camera\",\n        style: {\n          marginLeft: 5\n        },\n        size: 30,\n        color: \"black\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 100\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  return React.createElement(Background, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, React.createElement(Header, {\n    style: [styles.left_align],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \"Try it out!\"), React.createElement(FootPrint, {\n    style: styles.left_align,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Use your own product in real life!\"), React.createElement(ActionButton, {\n    style: {\n      marginTop: 20\n    },\n    onPress: function onPress() {\n      return hasPermission ? openCamera() : setToast({\n        type: 'error',\n        message: \"Go to settings to enable the camera.\"\n      });\n    },\n    title: \"Open Camera\",\n    icon: React.createElement(AntDesign, {\n      name: \"camera\",\n      style: {\n        marginLeft: 5\n      },\n      size: 30,\n      color: \"black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 189\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), capturedImage ? React.createElement(View, {\n    style: styles.imageContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, React.createElement(FootPrint, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, loading ? \"Result is loading.\" : \"Result is complete.\"), React.createElement(Image, {\n    style: {\n      width: 300,\n      height: 400,\n      marginTop: 10\n    },\n    source: {\n      uri: imageBase64 ? \"data:image/jpeg;base64,\" + imageBase64 : capturedImage.uri\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  })) : null, React.createElement(View, {\n    style: styles.buttonView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, React.createElement(ActionButton, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Ad\");\n    },\n    title: \"Done\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  })), React.createElement(Toast, _extends({}, toast, {\n    onDismiss: function onDismiss() {\n      return setToast({\n        value: '',\n        type: toast.type\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  left_align: {\n    alignSelf: \"flex-start\",\n    marginLeft: 10,\n    marginVertical: 5\n  },\n  logo: {\n    marginVertical: 50\n  },\n  buttonView: {\n    flex: 1,\n    width: \"100%\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\"\n  },\n  imageContainer: {\n    margin: 30,\n    flex: 1,\n    width: '100%',\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/Bhavesh/Developer/AI_CAMP/ai-on-thumbs/screens/Try.js"],"names":["React","useEffect","useState","useRef","Background","Logo","Header","FootPrint","ActionButton","AntDesign","Camera","Toast","FileSystem","axios","require","Try","navigation","hasPermission","setHasPermission","Constants","Type","back","type","setType","value","toast","setToast","startCamera","setStartCamera","capturedImage","setCapturedImage","imageBase64","setImageBase64","camera","loading","setLoading","requestPermissionsAsync","status","uri","readAsStringAsync","encoding","base64","post","then","response","console","log","JSON","parse","config","data","base_64","justifyContent","openCamera","takePhoto","current","takePictureAsync","photo","flex","width","alignItems","r","marginBottom","marginLeft","styles","left_align","marginTop","message","imageContainer","height","buttonView","navigate","StyleSheet","create","alignSelf","marginVertical","logo","margin"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react';\nimport { StyleSheet, Text, View, ActivityIndicator, Image } from 'react-native';\nimport Background from '../components/Background';\nimport Logo from '../components/Logo';\nimport Header from '../components/Header';\nimport FootPrint from '../components/FootPrint';\nimport ActionButton from \"../components/ActionButton\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { Camera } from 'expo-camera';\nimport Toast from '../components/Toast';\nimport * as FileSystem from 'expo-file-system';\nconst axios = require('axios')\n\n\nexport default function Try({navigation}) {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [type, setType] = useState(Camera.Constants.Type.back);\n  const [toast, setToast] = useState({ value: '', type: '' })\n  const [startCamera,setStartCamera] = useState(false);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [imageBase64, setImageBase64] = useState(null);\n  const camera = useRef(null)\n  const [loading, setLoading] = useState(true);\n  \n  useEffect(() => {\n        (async () => {\n        const { status } = await Camera.requestPermissionsAsync();\n        setHasPermission(status === 'granted');\n        \n        })();\n    }, []);\n    useEffect(() => {\n        (async () => {\n            setLoading(true)\n            if(capturedImage && capturedImage.uri){\n                const base64 = await FileSystem.readAsStringAsync(capturedImage.uri, { encoding: 'base64' });\n                axios.post('http://python-detect-faces.herokuapp.com/image', {\n                    \"base_64\":base64\n                  })\n                  .then(function (response) {\n                    console.log(JSON.parse(response.config.data).base_64);\n                    setImageBase64(JSON.parse(response.config.data).base_64)\n                    setLoading(false)\n                  })\n            }\n        })();\n    }, [capturedImage]);\n\n    if (hasPermission === null) {\n        return <Background style={{justifyContent:\"center\"}}><ActivityIndicator size={100}/></Background>;\n    }\n    function openCamera(){\n        setStartCamera(true)\n    }\n    async function takePhoto(){\n            if (!camera.current) return\n            const photo = await camera.current.takePictureAsync();\n            setCapturedImage(photo);\n            setStartCamera(false);\n    }\n    if(startCamera){\n        return(<Camera\n        style={{flex: 1,width:\"100%\", alignItems:\"center\", justifyContent:\"flex-end\"}}\n        ref={(r) => {\n        camera.current = r\n        }}\n        >\n            <ActionButton style={{marginBottom:30}} onPress={takePhoto} title={\"Take Photo\"} icon={<AntDesign name=\"camera\" style={{marginLeft:5}} size={30} color=\"black\" />}/>\n        </Camera>)\n    }\n  return (\n    <Background>\n        <Header style= {[styles.left_align]}>Try it out!</Header>\n        <FootPrint style={styles.left_align}>Use your own product in real life!</FootPrint>\n        <ActionButton style={{marginTop:20}} onPress={()=>hasPermission?openCamera():setToast({ type: 'error', message: \"Go to settings to enable the camera.\"})} title=\"Open Camera\" icon={<AntDesign name=\"camera\" style={{marginLeft:5}} size={30} color=\"black\" />}/>\n        {capturedImage?\n        <View style={styles.imageContainer}>\n            <FootPrint>{loading?\"Result is loading.\":\"Result is complete.\"}</FootPrint>\n            <Image\n          style={{width: 300, height: 400, marginTop:10}}\n          source={{uri: imageBase64?`data:image/jpeg;base64,${imageBase64}`:capturedImage.uri}}/>\n        </View>:null}\n        <View style={styles.buttonView}>\n            <ActionButton onPress={()=>navigation.navigate(\"Ad\")} title=\"Done\"/>\n        </View>\n        <Toast {...toast} onDismiss={() => setToast({ value: '', type: toast.type })} />\n    </Background>\n  );\n}\n\nconst styles = StyleSheet.create({\n    left_align:{\n        alignSelf:\"flex-start\",\n        marginLeft:10,\n        marginVertical:5,\n    },\n    logo:{\n      marginVertical: 50,\n    },\n    buttonView:{\n        flex:1,\n        width:\"100%\",\n        justifyContent:\"flex-end\",\n        alignItems:\"center\"\n    },\n    imageContainer:{\n        margin:30,\n        flex:1,\n        width:'100%',\n        alignItems:\"center\",\n    }\n});\n"]},"metadata":{},"sourceType":"module"}